<!DOCTYPE html>
<html>
  <head>
    <title>HCI</title>
    <html lang="en">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="/css/style.css">
    </head>
  <body>
    <div class="grid-container whole_ui">
      
      <div class="perm_pannel grid-container grid-item">
        <div class="grid-item listen_along_btn">
          <button onclick="listenAlong()" type="button" class="btn btn-block btn-lg">Listen Along</button>
        </div>
        <div class="grid-item connect_btn">
          <button type="connect" class="btn btn-block btn-lg">Connect</button>
        </div>
        <div class="grid-item media_controls grid-container">
          <button type="connect" class="btn btn-block btn-lg grid-item back_track"><img alt="previous track" class="media_control_icons" src="/images/back_track.png"></button>
          <button type="connect" class="btn btn-block btn-lg grid-item pause"><img alt="pause track" class="media_control_icons" src="/images/pause.png"></button>
          <button type="connect" class="btn btn-block btn-lg grid-item forward_track"><img alt="next track" class="media_control_icons" src="/images/forward_track.png"></button>
          <button type="connect" class="btn btn-block btn-lg grid-item vol_down"><img alt="volume down" class="media_control_icons" src="/images/vol_down.png"></button>
          <button type="connect" class="btn btn-block btn-lg grid-item mute"><img alt="mute" class="media_control_icons" src="/images/mute.png"></button>
          <button type="connect" class="btn btn-block btn-lg grid-item vol_up"><img alt="volume up" class="media_control_icons" src="/images/vol_up.png"></button>
        </div>
      </div>
      <div class="menu_pannel grid-item gird-container">
        <div class="tab_nav grid-container">
          <div class="grid-item control_tab">
            <button class="btn btn-block btn-lg" onclick="switchMenu(event, 'CONTROL')">Control</button>
          </div>
          <div class="grid-item nav_tab">
            <button class="btn btn-block btn-lg" onclick="switchMenu(event, 'NAV')">NAV</button>
          </div>
          <div class="grid-item apps_tab">
            <button class="btn btn-block btn-lg" onclick="switchMenu(event, 'APPS')">APPS</button>
          </div>
        </div>
        <div id="CONTROL" class="tabcontent">
          <div class="grid-container">
            <div class="d_doors grid-item grid-container">
              <h1 class="grid-item d_head_1">Doors</h1>
              <div class="d_s_lock_all grid-item">
                <button onclick="" type="button" class="btn btn-block btn-lg">Lock All</button>
              </div>
              <div class="d_s_seat_select grid-item">
                <h1>Selected Seat</h1>
              </div>
              <div class="d_s_lock_door grid-item">
                <button onclick="" type="button" class="btn btn-block btn-lg">Lock Door</button>
              </div>
            </div>
            <div class="d_windows grid-item grid-container">
              <h1 class="grid-item d_head_2">Windows</h1>
                <div class="d_lock_all grid-item">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-lg btn-p">Lock All</button>
                </div>
                <div class="d_seat_select grid-item">
                  <h1>Selected Seat</h1>
                </div>
                <div class="grid-item d_lock">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Lock</button>
                </div>
                <div class="grid-item d_wh_up">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Up</button>
                </div>
                <div class="grid-item d_wh_down">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Down</button>
                </div>
            </div>
            <div class="d_media grid-item grid-container">
              <h1 class="d_head_2 grid-item">Media</h1>
              <div class="grid-item d_m_lock_all">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Lock All</button>
              </div>
              <div class="grid-item d_m_shutdown_all">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Shutdown All</button>
              </div>
              <div class="grid-item d_m_seat_selected">
                <h1>Selected Seat</h1>
              </div>
              <div class="grid-item d_m_title">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Media Title</button>
              </div>
              <div class="grid-item d_m_lock">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Lock</button>
              </div>
              <div class="grid-item d_m_shutdown">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Shutdown</button>
              </div>
              <div class="grid-item d_m_controls media_controls grid-container">
                <button type="connect" class="btn btn-block btn-lg grid-item back_track"><img alt="previous track" class="media_control_icons" src="/images/back_track.png"></button>
                <button type="connect" class="btn btn-block btn-lg grid-item pause"><img alt="pause track" class="media_control_icons" src="/images/pause.png"></button>
                <button type="connect" class="btn btn-block btn-lg grid-item forward_track"><img alt="next track" class="media_control_icons" src="/images/forward_track.png"></button>
                <button type="connect" class="btn btn-block btn-lg grid-item vol_down"><img alt="volume down" class="media_control_icons" src="/images/vol_down.png"></button>
                <button type="connect" class="btn btn-block btn-lg grid-item mute"><img alt="mute" class="media_control_icons" src="/images/mute.png"></button>
                <button type="connect" class="btn btn-block btn-lg grid-item vol_up"><img alt="volume up" class="media_control_icons" src="/images/vol_up.png"></button>
              </div>
            </div>
            <div class="d_ramp grid-item grid-container">
              <h1 class="d_head_2 grid-item">Ramp</h1>
              <div class="grid-item d_r_level">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Level</button>
              </div>
              <div class="grid-item d_r_up">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Up</button>
              </div>
              <div class="grid-item d_r_down">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Down</button>
              </div>
            </div>
            <div class="d_heat grid-item grid-container">
              <h1 class="grid-item d_head_2">Heated Seats</h1>
                <div class="d_lock_all grid-item">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-lg btn-p">Lock All</button>
                </div>
                <div class="d_seat_select grid-item">
                  <h1>Selected Seat</h1>
                </div>
                <div class="grid-item d_lock">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Lock</button>
                </div>
                <div class="grid-item d_wh_up">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Hot</button>
                </div>
                <div class="grid-item d_wh_down">
                  <button onclick="" type="button" class="btn btn-block btn-lg btn-p">Cold</button>
                </div>
            </div>
            <div class="d_seat grid-item grid-container">
              <h1 class="grid-item d_head_3">Seat Adjustment</h1>
              <h1 class="grid-item d_a_seat_selected">Seat Selected</h1>
              <h1 class="grid-item d_a_headrest">Headrest</h1>
              <div class="grid-item d_a_headrest_up">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">UP</button>
              </div>
              <div class="grid-item d_a_headrest_down">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">DOWN</button>
              </div>
              <h1 class="grid-item d_a_height">Height</h1>
              <div class="grid-item d_a_height_up">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">UP</button>
              </div>
              <div class="grid-item d_a_height_down">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">DOWN</button>
              </div>
              <h1 class="grid-item d_a_lumbar">Lumbar</h1>
              <div class="grid-item d_a_lumbar_up">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">FORWARD</button>
              </div>
              <div class="grid-item d_a_lumbar_down">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">BACK</button>
              </div>
              <h1 class="grid-item d_a_recline">Recline</h1>
              <div class="grid-item d_a_recline_up">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">FORWARD</button>
              </div>
              <div class="grid-item d_a_recline_down">
                <button onclick="" type="button" class="btn btn-block btn-lg btn-p">BACK</button>
              </div>
            </div>
          </div>
        </div>
        <div id="NAV" class="tabcontent">
          <p>NAV placeholder</p>
        </div>
        <div id="APPS" class="tabcontent">
          <p>APPS placeholder</p>
        </div>
      </div>
      
      
    </div>
    
<script src="/socket.io/socket.io.js"></script>
<script>
  function listenAlong(){
    console.log("open pop up");
  };
  function switchMenu(evt, menuName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(menuName).style.display = "block";
    evt.currentTarget.className += " active";
  }
  var socket = io();

  var form = document.getElementById('form');
  var input = document.getElementById('input');
//  var st = document.getElementByName('status');

    var checkbox0 = document.controls.status[0];
    checkbox0.addEventListener('change', e => {
      if (e.target.checked) {
        var info = input.value
        var low = document.controls.status[0].checked;
        var medium = document.controls.status[1].checked;
        var high = document.controls.status[2].checked;
        socket.emit('chat message', "[" + info + "],[0],[" 
        + low + medium + high + "]");
        input.value = '';
      }
    });

    var checkbox1 = document.controls.status[1];
    checkbox1.addEventListener('change', e => {
      if (e.target.checked) {
        var info = input.value
        var low = document.controls.status[0].checked;
        var medium = document.controls.status[1].checked;
        var high = document.controls.status[2].checked;
        socket.emit('chat message', "[" + info + "],[1],[" + low + medium + high + "]");
        input.value = '';
      }
    });
   
    var checkbox2 = document.controls.status[2];
    checkbox2.addEventListener('change', e => {
      if (e.target.checked) {
        var info = input.value
        var low = document.controls.status[0].checked;
        var medium = document.controls.status[1].checked;
        var high = document.controls.status[2].checked;
        socket.emit('chat message', "[" + info + "],[2],[" + low + medium + high + "]");
        input.value = '';
      }
    });

    form.addEventListener('submit', function(e) {
    e.preventDefault();
    if (input.value) {
      var info = input.value
      var low = document.controls.status[0].checked;
      var medium = document.controls.status[1].checked;
      var high = document.controls.status[2].checked;
      socket.emit('chat message', "[" + info + "],[],[" + low + medium + high + "]");
      input.value = '';
      }
  });

  socket.on('chat message', function(msg) {
    var item = document.createElement('li');
    var str = msg.split('],[');
    var arr = str.toString();
  
    if (parseInt(str[1])==0) {
      document.controls.status[0].checked = true;
    } else if (parseInt(str[1])==1) {
      document.controls.status[1].checked = true;
    } else if (parseInt(str[1])==2) {
      document.controls.status[2].checked = true;
    } else {
      arr = str[0].substring(1);

      item.textContent = arr;
//    item.textContent = msg;
      messages.appendChild(item);
      window.scrollTo(0, document.body.scrollHeight);
 //   alert(document.controls.status[0].checked);
    }

  });
</script>
  </body>
</html>